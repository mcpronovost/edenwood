import{j as e,u as b,a as p,r as x,E as v,b as N}from"./index-CUKF36Jq.js";import{E,a as g}from"./Card-D8V1QNri.js";function S({children:r,onSubmit:s,isLoading:a,...u}){const t=l=>{l.preventDefault(),s&&!a&&s(l)};return e.jsx("form",{className:"edw-form",onSubmit:t,disabled:a,...u,children:r})}function j({label:r,name:s,type:a="text",options:u=[],defaultValue:t,required:l=!1,onChange:d,hasError:c,block:w=!1,...m}){return e.jsxs("div",{className:`edw-form-field ${w?"edw-form-field--block":""}`,...m,children:[e.jsxs("label",{className:"edw-form-field-label",htmlFor:`field-${s}`,children:[r,l&&e.jsx("span",{className:"edw-form-field-required",children:"*"})]}),e.jsxs("div",{className:"edw-form-field-input",children:[a==="textarea"?e.jsx("textarea",{id:`field-${s}`,name:s,defaultValue:t,onChange:d,rows:6,required:l}):a==="select"?e.jsx("select",{id:`field-${s}`,name:s,defaultValue:t,onChange:d,required:l,children:u.map(n=>e.jsx("option",{value:n.value,children:n.label},n.value))}):a==="radio"?e.jsx("div",{className:"edw-form-field-input-radio",children:u.map(n=>e.jsxs("label",{className:"edw-form-field-input-radio-label",children:[e.jsx("input",{type:"radio",name:s,value:n.value,onChange:d,required:l,checked:t===n.value}),e.jsx("span",{className:"edw-form-field-input-radio-label-btn",children:n.label})]},n.value))}):e.jsx("input",{type:a,id:`field-${s}`,name:s,defaultValue:t,onChange:d,required:l,autoComplete:"off"}),c&&e.jsx("p",{className:"edw-form-field-error",children:c})]})]})}function $({hasError:r}){const{t:s}=b();return e.jsx("div",{className:"edw-form-message",children:r&&e.jsx(E,{title:"Error",message:r||s("An error occurred"),variant:"danger"})})}const k=r=>{if(r.trim()){if(!/^[a-zA-Z0-9_]{3,32}$/.test(r))return"Username must be 3-32 characters, alphanumeric and underscores only"}else return"Username is required";return null},y=r=>{if(r){if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&:;.,])[a-zA-Z\d@$!%*?&:;.,]{8,}$/.test(r))return"Password must be at least 8 characters with 1 uppercase, 1 lowercase, 1 number, and 1 special character"}else return"Password is required";return null};function P(){const{n:r}=p(),{t:s}=b(),[a,u]=x.useState({username:"",password:""}),[t,l]=x.useState(!1),[d,c]=x.useState(null),w=()=>{const o={},i=k(a.username),f=y(a.password);return i&&(o.username=i),f&&(o.password=f),c({fields:o}),Object.keys(o).length===0},m=o=>{const{name:i,value:f}=o.target;u(h=>({...h,[i]:f})),d?.fields?.[i]&&c(h=>({...h,fields:{...h.fields,[i]:""}}))},n=async o=>{if(l(!0),c(null),!w()){l(!1);return}try{r("home")}catch(i){c(i.error||s("An error occurred"))}finally{l(!1)}};return e.jsx("section",{className:"edw-page edw-auth",children:e.jsxs("div",{className:"edw-auth-container",children:[e.jsxs("div",{className:"edw-auth-header",children:[e.jsx("h1",{className:"edw-auth-header-title",children:s("Sign in to your account")}),e.jsxs("p",{className:"edw-auth-header-subtitle",children:[s("Or")," ",e.jsx(v,{routeName:"register",className:"edw-auth-header-subtitle",children:s("create a new account")})]})]}),e.jsx(g,{children:e.jsxs(S,{className:"edw-auth-form",onSubmit:n,isLoading:t,children:[e.jsx(j,{label:s("Username"),name:"username",defaultValue:a.username,onChange:m,hasError:d?.fields?.username,required:!0,block:!0}),e.jsx(j,{label:s("Password"),name:"password",type:"password",defaultValue:a.password,onChange:m,hasError:d?.fields?.password,required:!0,block:!0}),d?.message&&e.jsx($,{hasError:d?.message}),e.jsx("div",{className:"edw-form-actions",children:e.jsx(N,{type:"submit",color:"primary",disabled:t,block:!0,children:s(t?"Signing in...":"Sign in")})})]})})]})})}export{P as default};
